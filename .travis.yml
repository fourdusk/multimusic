# 指定构建的语言环境
language: node_js

# 指定语言版本
node_js:
  - '10.16.0'

# 缓存不常用的目录
cache:
  directories:
    - node_modules

# 安装依赖
install: npm install

# 运行脚本构建
script: npm run build

# 只有监控到 GitHub 上 myblog 的 master 的改动，才进行构建
branches:
  only:
    - master

# 将构建好的 dist 目录所有文件，部署到 GitHub 上的 myblog 的 gh-pages 分支
deploy:
  provider: pages
  skip-cleanup: true
  github-token: ${GITHUB_TOKEN}
  keep-history: true
  local-dir: dist
  target-branch: gh-pages
  on:
    branch: master
